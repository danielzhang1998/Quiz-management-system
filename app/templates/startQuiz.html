{% extends "base2.html" %}
{% import "bootstrap/wtf.html" as wtf %}


{% block head %}
{{ super() }}
<!---refers to a css that contains styling for register page
<link rel="stylesheet" href="style.css">
-->
<link rel="stylesheet" href="{{ url_for('static', filename='style.css', _external=True) }}">
<!--remember to delete this-->
<script type="text/javascript" src="{{url_for('static', filename='alert.js')}}"></script>

{% endblock %}
{% block title %}
Start Quiz Edit
{% endblock %}
{% block body %}
<img class="logo" alt = "uwaLogo" src = "{{ url_for('static', filename='logo.jpeg', _external=True) }}" style="width: 400px;">
<table style="background-color: #ede7d3;margin: 10px;">
    <tr>
        <td style="background-color: orange;">&emsp;&emsp;</td>
        <td style="padding-left: 10px;"><h3 style="font-weight: 800;">Welcome to answer the quiz page!</h3><br>
        <div style="font-weight: 450; font-family: Georgia, 'Times New Roman', Times, serif;">    
        Each time when you finish a qustion answer, please click the "Save" button to save your question and move to the next qustion. All the answers will save to the database. Please make sure you insert the correct answer into the answer form and click the button "save button", if you do not click it to save, you might loose all your answers!
        <br><br>
        Please try to finish all the question in time and finish it by your own work!
        </div>
        <br>
    </td>
    </tr>
</table>

<SCRIPT LANGUAGE="JavaScript">
    var maxtime;
    if(window.name==''){ 
     maxtime = 120*60;
     }else{
     maxtime = window.name;
    }
    function CountDown(){
     if(maxtime>=0){
     if(Math.floor(maxtime/(3600))==0){
        hours = "0"+0;
     }else{
        hours = Math.floor(maxtime/(3600));
     }
     if(Math.floor(maxtime/120)==60||Math.floor(maxtime/120)==0){
         minutes = "0"+0;
     }else{
        minutes = Math.floor(maxtime/120);
     }
    if(Math.floor(maxtime%60)==0||Math.floor(maxtime%60)==60){
        seconds = "0"+0;
    }else{
        seconds = Math.floor(maxtime%60);
    }
     msg = "  Time left: "+ hours +" hours : " + minutes +" minutes : "+ seconds +" seconds ";
     document.getElementById("timer").innerHTML = msg;
     --maxtime;
     window.name = maxtime; 
     }
     else{
     clearInterval(timer);
     alert("Time is up!");
     function sleep(numberMillis) {
            var start = new Date().getTime();
            while (true) {
                if (new Date().getTime() - start > numberMillis) {
                    break;
                }
            }
        }
        sleep(1)
     document.getElementsByTagName('button')[1].click();
     }
    }
    timer = setInterval("CountDown()",1000);
    </SCRIPT>
    <div id="timer" style="color:black;font-weight: 500;margin-left: 10px;background-color: whitesmoke;font-size: 30px;">&emsp;</div>
{{ super() }}

{% endblock %}

{% block content %}


<p style="font-weight: 600; font-size: 30px;">Your teacher is: {{ teacher_name }}</p>
{% for i in range(current_question, question_num + 1) %}
<p style="font-weight: 450; font-size: larger; margin-top: 20px;">Your quesiton is: {{ Question.query.filter_by(quizset_id=QuizsetID, id= i + prev_num).first().Question }}</p>
<div class = "quiz">
    {{ wtf.quick_form(form)}}
    </div> 
{% endfor %}

<hr style="margin: 20px; margin-bottom: 5px; margin-bottom: 10px;">
<i style="margin-left: 40px; margin-top: 10px; font-size: 16px; color: #5D6D7E ;">Click Submit button to submit your answers or click check all to check all the answers finished or not.</i>
<br><br>
<form action= {{ url_for('finishQuiz') }}>
    <button action="button" type="submit" class="btn btn-info" id="submit" style="margin-top: 10px; margin-right: 20px;float: right;">&ensp;&ensp;Finish Quiz&ensp;&ensp;</button>
</form>
<div class="clearfix"></div>

<!--remember to delete this  <button onclick="run()">click to test</button>-->



{% endblock %}